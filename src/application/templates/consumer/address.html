{% extends "consumer/consumer_base.html" %}
{% block title %}FoodyPulse - Home{% endblock %}

{% block head %}
    <style>
        .header {
            width: 80%;
            margin: auto;
        }

        .header h4 {
            display: inline-block;
            font-size: 25px;
            padding-top: 10px;
        }

        .addressDiv {
            background-color: white;
            width: 35%;
            border: 1px black;
        }

        .inputs {
            width: 80%;
            margin: auto;
        }

        .form-control {
            margin: 10px auto;
        }

        label {
            margin-top: 10px;
        }

        .display-right {
            width: 60%;
            display: flex;
            float: right;
        }
    </style>
{% endblock %}

{% block content %}
    {% from "includes/_formHelper.html" import render_field %}

    <form method="POST" action="{{ url_for('consumer_myaddress') }}">
        <div class="addressDiv">
            <div class="header">
                <img src="{{ url_for("static", filename="cart/location.png") }}" alt="location Logo"
                     style="height: 35px; width: 40px; margin: 15px 0px; display: inline-block">
                <h4 style="margin-left: 20px;">Delivery Address</h4>
            </div>
            <div class="inputs">
                <iframe src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15954.644746298643!2d103.8489487!3d1.37995!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0xe5f10ff680eed942!2sNanyang%20Polytechnic!5e0!3m2!1sen!2ssg!4v1643549501763!5m2!1sen!2ssg"
                        style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                <div class="form-group">
                    {{ render_field(form.consumer_address, class="form-control", placeholder='Enter Address here') }}
                </div>

                <input type="submit" value="Submit" class="btn btn-primary" style="margin: 20px 0;"/>

            </div>
        </div>
    </form>
    {% for cart_item in cart_items %}
        <div class="card rounded-3 mb-4 display-right">
            <div class="card-body p-4">
                <div
                        class="row d-flex justify-content-between align-items-center">
                    <div class="col-md-2 col-lg-2 col-xl-2 d-flex">
                        <p class="lead fw-normal mb-2">{{ cart_item.qty }}x</p>
                    </div>
                    <div class="col-md-4 col-lg-4 col-xl-4">
                        <p class="lead fw-normal mb-2">{{ cart_item.food.name }}</p>
                        </p>
                    </div>
                    <div class="col-md-3 col-lg-2 col-xl-2 offset-lg-1">
                        {% if cart_item.is_discounted() %}
                            <h5 class="mb-0" style="text-decoration: line-through">
                                ${{ "%.2f" % (cart_item.food.price * cart_item.qty) }}</h5>
                            <h5 class="mb-0">${{ "%.2f" % cart_item.price }}</h5>
                        {% else %}
                            <h5 class="mb-0">${{ "%.2f" % cart_item.price }}</h5>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
    <div class="card display-right">
        <div class="card-body d-flex justify-content-evenly">
            <p class="lead fw-normal mb-2">
            Delivery Fee
            &nbsp;TODO
            </p>
            <hr>
            <p class="lead fw-normal mb-2">Subtotal</p>
            <p class="lead fw-normal mb-2">
                S$ {{ "%.2f" % cart.get_subtotal() }}</p>

        </div>
    </div>



{% endblock %}
